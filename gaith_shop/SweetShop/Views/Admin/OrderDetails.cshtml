@model Order
@{
    ViewData["Title"] = "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨";
    Layout = "_AdminLayout";
    var statusColors = new Dictionary<string, string>
            {
                ["Pending"] = "badge-pending",
                ["Processing"] = "badge-process",
                ["Shipped"] = "badge-done",
                ["Delivered"] = "badge-done"
            };
    var badgeCss = statusColors.ContainsKey(Model.Status) ? statusColors[Model.Status] : "badge-pending";
}

<div class="row g-3">
    <!-- Order Summary -->
    <div class="col-lg-4">
        <div class="admin-card mb-3">
            <div class="admin-card-header">
                <h5><i class="bi bi-receipt me-2" style="color:#1A8CB0;"></i>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h5>
            </div>
            <div class="admin-card-body">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
                    <span style="color:#64748b;font-size:14px;">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</span>
                    <span style="font-weight:700;color:#1A8CB0;font-size:18px;">#@Model.Id</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
                    <span style="color:#64748b;font-size:14px;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</span>
                    <span style="font-weight:500;font-size:14px;">@Model.OrderPlaced.ToString("yyyy/MM/dd HH:mm")</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
                    <span style="color:#64748b;font-size:14px;">Ø§Ù„Ø­Ø§Ù„Ø©</span>
                    <span class="status-badge @badgeCss">
                        @{
                            string translatedStatus = Model.Status switch
                            {
                                "Pending" => "Ù…Ø¹Ù„Ù‚",
                                "Processing" => "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©",
                                "Shipped" => "Ù…Ø´Ø­ÙˆÙ†",
                                "Delivered" => "ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„",
                                _ => Model.Status
                            };
                        }
                        @translatedStatus
                    </span>
                </div>
                <hr style="border-color:#f1f5f9;">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <span style="font-weight:600;font-size:15px;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                    <span style="font-weight:700;color:#1A8CB0;font-size:18px;">@Model.OrderTotal.ToString("0.00")
                        Ø¯.Ø£</span>
                </div>
            </div>
        </div>

        <!-- Customer Info -->
        <div class="admin-card mb-3">
            <div class="admin-card-header">
                <h5><i class="bi bi-person-fill me-2" style="color:#1A8CB0;"></i>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h5>
            </div>
            <div class="admin-card-body" style="font-size:14px;">
                <div style="margin-bottom:10px;"><span
                        style="color:#94a3b8;display:block;font-size:12px;">Ø§Ù„Ø§Ø³Ù…</span><span
                        style="font-weight:500;">@Model.FirstName @Model.LastName</span></div>
                <div style="margin-bottom:10px;"><span
                        style="color:#94a3b8;display:block;font-size:12px;">Ø§Ù„Ù‡Ø§ØªÙ</span><span
                        dir="ltr">@Model.PhoneNumber</span></div>
                <div style="margin-bottom:10px;"><span
                        style="color:#94a3b8;display:block;font-size:12px;">Ø§Ù„Ø¨Ø±ÙŠØ¯</span><span>@Model.Email</span></div>
                <div><span style="color:#94a3b8;display:block;font-size:12px;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span>
                    <span>@Model.AddressLine1@(Model.AddressLine2 != null ? ", " + Model.AddressLine2 : ""),
                        @Model.City, @Model.Country</span>
                </div>
            </div>
        </div>

        <!-- Update Status -->
        <div class="admin-card">
            <div class="admin-card-header">
                <h5><i class="bi bi-arrows-angle-contract me-2"></i>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©</h5>
            </div>
            <div class="admin-card-body">
                <form asp-action="UpdateOrderStatus" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@Model.Id" />
                    <div class="admin-form-group">
                        <label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                        <select name="status" class="admin-form-control admin-form-select">
                            <option value="Pending" selected="@(Model.Status == "Pending")">â³ Ù…Ø¹Ù„Ù‚</option>
                            <option value="Processing" selected="@(Model.Status == "Processing")">ğŸ”„ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
                            </option>
                            <option value="Shipped" selected="@(Model.Status == "Shipped")">ğŸ“¦ Ù…Ø´Ø­ÙˆÙ†</option>
                            <option value="Delivered" selected="@(Model.Status == "Delivered")">âœ… ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-admin-primary" style="width:100%;justify-content:center;">
                        <i class="bi bi-check-lg"></i> Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø©
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Order Items -->
    <div class="col-lg-8">
        <div class="admin-card">
            <div class="admin-card-header">
                <h5><i class="bi bi-cart-fill me-2" style="color:#1A8CB0;"></i>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                    (@Model.OrderDetails.Count Ø¹Ù†ØµØ±)</h5>
                <a asp-action="Orders" style="color:#94a3b8;font-size:13px;text-decoration:none;">
                    <i class="bi bi-arrow-right me-1"></i>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø·Ù„Ø¨Ø§Øª
                </a>
            </div>
            <div class="admin-card-body p-0">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th>Ø§Ù„Ø³Ø¹Ø±</th>
                            <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var detail in Model.OrderDetails)
                        {
                            <tr>
                                <td>
                                    <div style="display:flex;align-items:center;gap:10px;">
                                        @if (!string.IsNullOrEmpty(detail.Product?.ImageUrl))
                                        {
                                            <img src="@detail.Product.ImageUrl"
                                                style="width:40px;height:40px;border-radius:8px;object-fit:cover;">
                                        }
                                        <span style="font-weight:500;">@detail.Product?.Name</span>
                                    </div>
                                </td>
                                <td style="font-weight:600;color:#1A8CB0;">x@detail.Amount</td>
                                <td>@detail.Price.ToString("0.00") Ø¯.Ø£</td>
                                <td style="font-weight:600;">@((detail.Price * detail.Amount).ToString("0.00")) Ø¯.Ø£</td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div style="padding:16px 20px;text-align:left;border-top:2px solid #f1f5f9;">
                    <span style="font-size:16px;font-weight:700;color:#1A8CB0;">
                        Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: @Model.OrderTotal.ToString("0.00") Ø¯.Ø£
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
